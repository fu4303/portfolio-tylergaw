<!--# set var="title" value="CSS True Titles by Tyler Gaw"-->
<!--# set var="page" value="article"-->
<!--# include file="/header.include.html"-->
<article class="hentry">
    <header>
        <time class="published" datetime="2014-02-25">25 Feb 2014</time>
        <h1 class="entry-title med-title">CSS True Titles</h1>
        <p class="entry-author author vcard">
            By <span class="fn">Tyler Gaw</span>
        </p>
        <!--# include file="/articles/rdb-buttons.include.html"-->
    </header>
    <div class="entry-content">
        <figure>
            <a href="http://lab.tylergaw.com/css-true-titles/">
                <img src="/articles/assets/post-image-true-titles-intro.jpg"
                    alt="Image of the title cards from the True Titles demo">
            </a>
        </figure>
        <p class="entry-intro">
            The <a href="http://youtu.be/ZRPpCqXYoos">opening titles</a> to the
            show True Detective are incredible. CSS contains the building
            blocks necessary to create a similar style title sequence. I tried my
            hand it and came up with fun results. Here's the
            <a href="http://lab.tylergaw.com/css-true-titles/">demo</a> and the
            <a href="https://github.com/tylergaw/css-true-titles">source code</a>.
        </p>
        <p>
            The first thing I have to do is issue the disclaimer. This is an
            experimental project. Things will most likely go wrong when you view
            it. I'm pushing on the browser pretty hard. Also, due to limited suppport
            of <a href="http://www.w3.org/TR/css-masking-1">CSS masking</a>
            you'll only see the full effect in Chrome, Opera, and possibly Mobile Safari.
            The animations will work in other browsers, but things will look strange.
        </p>
        <h2>The Masking</h2>
        <p>
            There's a whole lot going on in each shot of the TD titles. You should
            read the write up about it on <a href="http://www.artofthetitle.com/title/true-detective/">Art of the Title</a>.
            The main effect that I wanted to recreate was the use of human silhouettes
            to mask shots. They use video clips for the masks and the content being
            masked, but I stuck with still images to keep things a little easier.
        </p>
        <figure>
            <img src="/articles/assets/post-image-true-titles-mask-example.jpg"
                alt="">
            <figcaption>
                An example of using a human to mask footage in the True Detective titles
            </figcaption>
        </figure>
        <p>
            I'm accomplishing masking using the CSS <code>mask</code>
            property. As I mentioned above, browser suppport for it is currently
            limited. I'm going to break down the first title
            card to explain how the masking is
            implemented.
        </p>
        <figure>
            <img src="/articles/assets/post-image-true-titles-opener-card.jpg"
                alt="">
            <figcaption>
                A still of the first title card.
            </figcaption>
        </figure>
        <p>
            Each title card is an <code>li</code> element. They contain base
            styles like width, height, position, etc. Within each <code>li</code>
            is markup specific to that card. Below is the markup for the elements
            that make up the opening card.
        </p>
        <pre><code>&lt;div class="composition animated"&gt;
  &lt;div class="town animated">&lt;/div&gt;
  &lt;div class="human">&lt;/div&gt;
&lt;/div&gt;</code></pre>
        <p>
            The containing <code>div</code> element with the class of "composition"
            houses all the images. I'm using a containing element here so I can move
            and scale the "human" and the "town" together, while still being able
            to move and scale each independently. I'm also applying the mask
            to the composition element. The "human" and "town" elements have background
            images applied to them.
        </p>
        <figure>
            <img src="http://lab.tylergaw.com/css-true-titles/img/opener-human.png"
                alt="">
            <figcaption>
                The partially transparent human image, which doubles as the mask
                for the opening card.
            </figcaption>
        </figure>
        <p>
            All of the images are from the <a href="http://flickr.com/commons">Flickr Commons</a>.
        </p>
        <figure>
            <img src="http://lab.tylergaw.com/css-true-titles/img/opener-town.png"
                alt="">
            <figcaption>
                The background image for the town element.
            </figcaption>
        </figure>
        <p>
            I want to be able to move the "town" element from right to left and
            left to right. If I applied the mask to that element, the mask would
            move with the town causing it to not line up properly with the human image.
            The mask needs to be applied to an element above it, the composition element.
            Since CSS masks are only concerned with the opaque and transparent
            portions of an image, I can reuse the human image as the mask for the
            "composition" element using the CSS below. Areas appearing under
            opaque portions will be visible, those under transparent portions will
            be invisible.
        </p>
        <pre><code>.opener .composition {
  ...
  -webkit-mask: url("opener-human.png") top left/cover no-repeat;
  mask: url("opener-human.png") top left/cover no-repeat;
}</code></pre>
        <p>
            <code>mask</code> has similar properties as <code>background</code>.
            URL, position, size, repeat. It was important that all of the images and mask
            had the same <code>background-size</code> setting. In this case they
            are all set to <code>cover</code>. That prevents the images from becoming
            too short or too narrow at that you see the edges of them. I could
            have set a fixed width and height on the title cards to avoid this
            altogether, but it was more fun to try and embrace the unstable
            environment that is a Web browser.
        </p>
        <p>
            The rest of the title cards follow a similar pattern with adjustments
            based on the the number of images that were needed and the animations
            that were put into place. You can see the source scss for each
            card <a href="https://github.com/tylergaw/css-true-titles/tree/master/css/scss/partials">here</a>.
        </p>
        <h2>The Animations</h2>
        <p>
            There are a few different animations happening during the sequence.
            The main animation–or timeline–is responsible for cutting to each card
            and looping back to the first after the last. Within each card there
            are one or more animations that control composition elements or individual
            elements.
        </p>
        <figure>
            <img src="/articles/assets/post-image-true-titles-ani-diagram.jpg"
                alt="Sketch showing the length of the main timelime is seconds and the length of each sub timeline as a percentage.">
            <figcaption>
                A diagram showing the main and sub timelines of the sequence.
            </figcaption>
        </figure>
        <h3>The main timeline</h3>
        <p>
            Once I came up with all the cards I wanted, I tweaked
            the total length until the pacing felt about right. The .54 seconds was
            added the to make the sequence length the same as the audio track.
        </p>
        <p>
            As the diagram shows, the length of each title card is a percentage
            of the total sequence length. That length is how long that card will
            be visible. Figuring out the length for each card took quite a bit
            of trial and error to get right. If each card was the same length, coming
            up with a percentage for each would be easy, <code>100% / number of cards = length%</code>.
            That was not the case with this sequence.
            There are four title cards and one "bump" card.
            The bump card contains no text, it's there as a break and
            extra visual information (AKA, it looks cool). Because of that, the
            bump needed to be shorter than the title cards. The photography card
            doesn't contain as much motion as the other cards and that was making it feel too long.
            I stole time from it to give to the last card. I wanted the last card with my Twitter info
            to be longer than the others.
        </p>
        <p>
            Each card needs keyframes at multiple positions. I'm going to show
            the second title card as an example, because they get a little strange.
        </p>
        <pre><code>@keyframes director {
  0%, 22.9%, 46%, 100% {
    opacity: 0;
    transform: translateX(-100%);
  }

  23%, 45.9% {
    opacity: 1;
    transform: translateX(0);
  }
}</code></pre>
        <p>
            I'll start at the second set of frames. Starting at 23% of the main
            timeline length I want the card to be displayed. It should stay
            visible until 45.9% of the main timeline length.
        </p>
        <p>
            The first set of frames says that the card should be invisible and
            off screen from 0% until 22.9% and again from 46% to 100%.
        </p>
        <p>
            I'm using the 0.1% intervals to make sure there is no visible interpolation
            of the opacity or tranform. I want the transition from one card to
            the next to be a quick cut. The opacity is still transitioning from
            0 to 1 and translateX from -100% to 0, but it's just too fast to be seen.
        </p>
        <p>
            I'm using <code>translateX</code> to move the invisible cards
            out of the viewport so they don't obsure any elements of the current
            visible card. That was happening when I was only using <code>opacity</code>.
        </p>
        <p>
            Again, getting the timing correct on each card was just a lot of trial
            and error, and changing things a percentage at a time. You can see
            the full scss for the main timeline animation
            <a href="https://github.com/tylergaw/css-true-titles/blob/master/css/scss/partials/_general.scss#L115">here</a>.
        </p>
        <p>
            <i>Thanks for reading</i>
        </p>
    </div>
</article>
<nav id="article-navigation">
    <a href="/articles/2000-days">Older</a> <a class="disabled">Newer</a>
</nav>
<!--# set var="disqus_identifier" value="css-true-titles"-->
<!--# set var="disqus_title" value="CSS True Titles"-->
<!--# include file="comments.include.html"-->
<!--# include file="/footer.include.html"-->